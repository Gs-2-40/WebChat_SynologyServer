<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chat</title>
</head>
<body>
    <a href="login">Back</a>
    <h3 id="username">None</h3>
    <textarea readonly id="mes">Hello world!</textarea>
    <form action="/send" method="POST">
        <input type="text" name="mes" placeholder="Message">
        <button type="submit">Send</button>
    </form>
    <script>
        function updateContent() {
            fetch('/mes')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    // Обработка полученных данных
                    document.getElementById('mes').innerHTML = data;
                })
                .catch(error => {
                    // Обработка ошибок
                    console.error('There was a problem with the fetch operation:', error);
                });
        }
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }
        document.getElementById("username").textContent = getCookie("username");
        setInterval(updateContent, 1000);
    </script>
</body>
</html>